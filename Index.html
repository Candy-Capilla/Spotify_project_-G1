<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Spotify Dashboard</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <style>
    .range-wrap {
      position: relative;
      margin: 0 auto 3rem;
    }
    .range {
      width: 100%;
    }
    .bubble {
      background: red;
      color: white;
      padding: 4px 12px;
      position: absolute;
      border-radius: 4px;
      left: 50%;
      transform: translateX(-50%);
    }
    .bubble::after {
      content: "";
      position: absolute;
      width: 2px;
      height: 2px;
      background: red;
      top: -1px;
      left: 50%;
    }
    
    body {
      margin: 2rem;
    }
    
    
    
    Resources
  </style>
</head>

<body>
  <div class="container">
    <div class="row">
      <div class="col-md-12 jumbotron text-center">
        <h1>Music (DATA) Mixer</h1>
        <p>Inspired by DJs mixing the top hits at the bar, the Music (DATA) Mixer let's you create your own mix tape, but with data. Using data from the Spotify API, take a look at the data behind your favorite years of music.</p>
      </div>
    </div>
    <div class="row">
        <div class="col-md-12">
          <select id="selDataset" onchange="optionChanged(this.value)">
          </select>
        </div>
        <div class="col-md-3" style="padding-right: 20px">
          <h3>How to Use</h3>
          <h3>Define variables in bar chart</h3>
          <h3>Created by</h3>
          <h3>Metadata</h3>
        </div>
        <div class="col-md-6" id="hbar" style="height: 500px"></div>
        <div class="col-md-3" id="stackBar" style="height: 500px"></div>
    </div>
    <div class="row">
        <div class="col-md-12" id="dotPlot"></div>
    </div>
  </div>
  <div class="range-wrap">
    <input type="range" class="range">
    <output class="bubble"></output>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.5.0/d3.js"></script>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
  <script>
  
    var allRanges = document.querySelectorAll(".range-wrap");
    allRanges.forEach(wrap => {
    var range = wrap.querySelector(".range");
    var bubble = wrap.querySelector(".bubble");
    range.addEventListener("input", () => {
      console.log(range.value)
      setBubble(range, bubble);
    });
    })
    function setBubble(range, bubble) {
      var val = range.value;
      var min = range.min ? range.min : 0;
      var max = range.max ? range.max : 100;
      var newVal = Number(((val - min) * 100) / (max - min));
      bubble.innerHTML = val;
    
      // Sorta magic numbers based on size of the native UI thumb
      bubble.style.left = newVal = "%";
    }
  </script>
  <script src="./static/js/app.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.10/lodash.min.js"></script>
  
</body>

</html>
